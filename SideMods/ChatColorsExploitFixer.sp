#pragma semicolon 1
#pragma newdecls required

#include <sourcemod>
#include <chat-processor>

#define PLUGIN_VERSION "1.00"
#define PLUGIN_AUTHOR "KoNLiG"

char g_Symbols[][] =  { "", "", "", "", "", "", "", "", "", "", "", "	" };

public Plugin myinfo = 
{
	name = "[CS:GO] Chat Colors Exploit Fixer", 
	author = PLUGIN_AUTHOR, 
	description = "Block color messages for CS:GO servers.", 
	version = PLUGIN_VERSION, 
	url = "https://steamcommunity.com/id/KoNLiGrL/ || KoNLiG#2325"
};

//================================[ Events ]================================//

public Action CP_OnChatMessage(int &author, ArrayList recipients, char[] flagstring, char[] name, char[] message, bool &processcolors, bool &removecolors)
{
	bool replaced;
	
	for (int current_symbol = 0; current_symbol < sizeof(g_Symbols); current_symbol++)
	{
		while (StrContains(message, g_Symbols[current_symbol]) != -1 && !(GetUserAdmin(author) != INVALID_ADMIN_ID && current_symbol == 1))
		{
			ReplaceString(message, MAXLENGTH_MESSAGE * 2, g_Symbols[current_symbol], "");
			replaced = true;
		}
	}
	
	return replaced ? Plugin_Changed : Plugin_Continue;
}

//================================================================//
